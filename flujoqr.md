Implementa toda la nueva lógica en la pantalla Historial del cliente siguiendo estrictamente el branding y los estilos existentes de la app. La pantalla debe tener tres tabs: QR activos, QR canjeados y QR expirados. Cada tab debe mostrar una lista de cards minimalistas basadas en PromoCard, ordenadas por más recientes primero, mostrando todos los detalles que ya tiene la PromoCard excepto fechas de inicio y expiración.

Lógica completa de los QR: cada promoción tiene un qrBase. Para cada usuario se genera un qrEspecifico concatenando qrBase + idCliente. Existen dos flujos: Opción 1: el qrEspecifico generado para el Cliente A puede ser escaneado por el Cliente B. Cuando esto sucede, ambos usuarios reciben un qrValidoEspecifico independiente para cada uno (formado por qrBase + idCliente + estado=valido). Cada usuario puede canjear su propio qrValidoEspecifico sin afectar el del otro. Opción 2: dos o más clientes presentan al negocio su qrEspecifico. El negocio escanea cada uno y genera el qrValidoEspecifico para cada cliente, pero marcándolo como canjeado inmediatamente, agregando la respectiva card al historial de canjeados.

Cada qrValidoEspecifico tiene una vida máxima de 1 hora. Si se canjea dentro de ese tiempo, cambia a estado canjeado. Si llega la hora sin canjearse, pasa a expirado. Si aún queda tiempo y no se ha canjeado, permanece en activo.

Cada card del historial debe incluir un icono pequeño, minimalista y animado en la esquina superior izquierda, con apariencia de reloj-cronómetro sin números: un círculo simple tipo “pacman” con borde de espesor medio y centro con opacidad media. La animación consiste en que la “boca” del pacman se abre progresivamente conforme el tiempo restante disminuye, hasta desaparecer al llegar a cero. Colores del icono según tiempo restante: verde si quedan más de 30 minutos, naranja si quedan entre 30 y 10 minutos, y rojo si quedan menos de 10 minutos. Este icono solo aparece en la tab de QR activos.

En la tab de QR canjeados, reemplaza el icono por una etiqueta rectangular sin animación, con borde medio, fondo del color azul del antiguo “pájaro de Twitter” y texto “canjeado”. En la tab de QR expirados, reemplaza el icono por una etiqueta roja sin animación con texto “expirado”. Las etiquetas siguen la misma estética general del icono (bordes medianos, estilo limpio y minimalista), pero en formato rectangular con el texto del tag dentro.